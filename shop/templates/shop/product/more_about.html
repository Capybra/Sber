{% load static %}
<div id="{{ product.slug }}-more-about-form" class="modal fade">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body">
          <div>
              <div class="row">

                <script>
                  function increaseValue(inputId) {
                    var currentValue = parseInt(document.getElementById(inputId).value);
                    document.getElementById(inputId).value = currentValue + 1;
                  }
              
                  function decreaseValue(inputId) {
                    var currentValue = parseInt(document.getElementById(inputId).value);
                    if (currentValue > 1) {
                      document.getElementById(inputId).value = currentValue - 1;
                    }

                  }
                </script>

                  <img src="{{ product.image.url }}" alt="" style="width: 100%">
                  <div class="modal-name-of-product-title">{{ product.name }}
                    {{product.star_rating}}
                    <img src="{% static 'admin\img\star.svg' %}"/>
                  </div>
                  <h6 style="border: 0px;">Цена</h6>
                  <div class="modal-price-title">
                      {{ product.price }} ₽ 
                  </div>
                  <div class="modal-description-title">
                      {{ product.description | safe }}
                  </div>
                  <div class="btn-cart-change-value">
                    <button class="btn btn-success" onclick="decreaseValue('{{ product.slug }}-more')">-</button>
                    <button class="btn btn-success" onclick="increaseValue('{{ product.slug }}-more')">+</button>
                  </div>
                  <form action="{% url "cart:cart_add" product.id %}" method="post">
                      {% csrf_token %}
                      <div class="col p-4">
                          <input type="hidden" name="quantity" value="1">
                          <input type="hidden" name="update" value="False">
                      </div>
                      <div class="btn-cart-change-value-line">
                        <input type="number" id="{{ product.slug }}-more" name="quantity" value="1">
                      </div>
                      <div class="col p-2">
                          <input type="submit" value="Добавить в корзину" class="btn btn-outline-success btn-block btn-lg">
                          <button type="button" class="btn btn-outline-success btn-block btn-lg" style="margin-left: 26%;" data-bs-toggle="modal"
                          data-bs-target="#{{ product.slug }}-rate-form" id="{{ product.slug }}-to-rate-button";>
                          <div>Оценить</div>
                        </button>
                      </div>
                  </form>
                  <div class="row p-3">
                    <div class="col p-2">
                        <button type="button" class="btn btn-outline-warning btn-block btn-lg" data-bs-dismiss="modal">
                            Назад
                        </button>
                    </div>
                </div>
                  <div class="comments-container">
                    <div class="comments">
                      {% for comment in comments %}
                        {% if comment.product == product %}
                          <div class="comment">
                            <p><strong>{{ comment.user }}</strong>: {{ comment.description }}
                              {{comment.star_rating}}<img src="{% static 'admin\img\star.svg' %}"/></p>
                          </div>
                        {% endif %}
                      {% endfor %}
                    </div>
                  </div>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>

{% if user.is_authenticated %}
<div id="{{ product.slug }}-rate-form" class="modal fade">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title">Поделитесь впечатлениями</h1>
      </div>
      <div class="modal-body">
        <form action="{% url "shop:comment_view" product.id user.username %}" method="post">
          {% csrf_token %}
          <div class="col p-2">
            <selection class="rating-area" style="margin-right: 25%;">
              <input type="radio" id="{{ product.slug }}-star-5" name="rating" value="5">
              <label for="{{ product.slug }}-star-5" title="Отлично"></label>	
              <input type="radio" id="{{ product.slug }}-star-4" name="rating" value="4">
              <label for="{{ product.slug }}-star-4" title="Хорошо"></label>    
              <input type="radio" id="{{ product.slug }}-star-3" name="rating" value="3" checked>
              <label for="{{ product.slug }}-star-3" title="Удовлетворительно"></label>  
              <input type="radio" id="{{ product.slug }}-star-2" name="rating" value="2">
              <label for="{{ product.slug }}-star-2" title="Плохо"></label>    
              <input type="radio" id="{{ product.slug }}-star-1" name="rating" value="1">
              <label for="{{ product.slug }}-star-1" title="Ужасно"></label>
            <selection/>
          </div>
          <div class="form-group shadow-textarea">
            <textarea class="form-control z-depth-1" id="{{ product.slug }}-comment-text" rows="3"
            name="comment-text" placeholder="Ваш комментарий (необязательно)"></textarea>
          </div>
          <button type="submit" class="rating-submit-btn">Отправить</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endif %}